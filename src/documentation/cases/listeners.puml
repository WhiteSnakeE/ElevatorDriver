@startuml

actor Passenger

Passenger -> Floor: pressUpButton()
Floor -> FloorButton: press(floorNumber)
FloorButton -> PressUpButtonCommand: execute(params)
PressUpButtonCommand -> FindNearestCabinCommand: execute(params)
FindNearestCabinCommand -> MoveCabinCommand: execute(params)
MoveCabinCommand -> StartEngineCommand: execute(params)
MoveCabinCommand -> VisitFloorCommand: execute(params)

VisitFloorCommand -> Shaft: fireCabinPosition(cabinPosition)
Shaft -> ElevatorDriver: handleCabinPositionChanged(event)
ElevatorDriver -> ShaftListener: handleCabinPositionChanged(event)
activate ElevatorDriver
ElevatorDriver -> StopEngineCommand: execute(params)
ElevatorDriver -> OpenDoorCommand: execute(params)
OpenDoorCommand -> Shaft: fireOpenDoor()
deactivate ElevatorDriver
Shaft -> ElevatorDriver: handleDoorStateChanged(event)
ElevatorDriver -> CloseDoorCommand: execute(params)
CloseDoorCommand -> Shaft: fireOpenDoor()
Shaft -> ElevatorDriver: handleDoorStateChanged(event)
ElevatorDriver -> CloseDoorCommand: execute(params)
activate CloseDoorCommand
CloseDoorCommand -> StartEngineCommand: execute(params)
CloseDoorCommand -> VisitFloorCommand: execute(params)
deactivate CloseDoorCommand

@enduml
